![Top Language](https://img.shields.io/github/languages/top/makeshift/telegram-sonarr-radarr-bot.svg)
![Repo Size](https://img.shields.io/github/repo-size/makeshift/telegram-sonarr-radarr-bot.svg)
![Repo Issues](https://img.shields.io/github/issues-raw/makeshift/telegram-sonarr-radarr-bot.svg)
![Version](https://img.shields.io/github/package-json/v/makeshift/telegram-sonarr-radarr-bot.svg)
![Node Version](https://img.shields.io/node/v/cli-highlight.svg)
![Last Commit](https://img.shields.io/github/last-commit/makeshift/telegram-sonarr-radarr-bot.svg)
![Maintained](https://img.shields.io/maintenance/yes/2019.svg)

# Telegram Sonarr/Radarr Bot

I got tired of there being separate bots, so I started combining them into one.

**Note:** This bot is in active development and some of the below config does not work (well, actually, most of it).

## Config

Config is generated by [nconf](https://github.com/indexzero/nconf), so the bot will gather config from environment variables, arguments and the `config/config.json` file.

### Sonarr

| **Key**                 | **Description**                                                                                                 | **Optional**    | **Default Value**   |
|--------------------   |------------------------------------------------------------------------------------------------------------   |------------   |-----------------  |
| sonarr                | Top level object                                                                                              | No            |                   |
| sonarr.enabled               | Should the Sonarr API be enabled? (Hides all Sonarr related buttons if `false`)                               | Yes           | true              |
| sonarr.url                   | Sonarr's URL (eg. `localhost:8989`)                                                                           | No            |                   |
| sonarr.apiKey                | Sonarr's API key                                                                                              | No            |                   |
| sonarr.defaultProfileName    | The name of the default quality profile you'd like to use.  If not supplied, will ask the user each time.     | Yes           | Will ask user     |
| sonarr.defaultPathName       | The name of the default path for downloading TV. If not supplied, will ask the user each time.                | Yes           | Will ask user     |
| sonarr.defaultMonitor        | Will monitor the supplied string for new episodes in that series. Options: `"all"`, `"missing"`, `future"`    | Yes           | All               |

### Radarr

| **Key**                 | **Description**                                                                                                 | **Optional**    | **Default Value**   |
|--------------------   |------------------------------------------------------------------------------------------------------------   |------------   |-----------------  |
| radarr                | Top level object                                                                                              | No            |                   |
| radarr.enabled               | Should the radarr API be enabled? (Hides all Sonarr related buttons if `false`)                               | Yes           | true              |
| radarr.url                   | Sonarr's URL (eg. `localhost:8989`)                                                                           | No            |                   |
| radarr.apiKey                | Sonarr's API key                                                                                              | No            |                   |
| radarr.defaultProfileName    | The name of the default quality profile you'd like to use.  If not supplied, will ask the user each time.     | Yes           | Will ask user     |
| radarr.defaultPathName       | The name of the default path for downloading TV. If not supplied, will ask the user each time.                | Yes           | Will ask user     |

### Telegram

| **Key**                 | **Description**                                                                                                 | **Optional**    | **Default Value**   |
|--------------------   |------------------------------------------------------------------------------------------------------------   |------------   |-----------------  |
| telegram              | Top level object                                                                                              | No            |                   |
| telegram.botToken              | Should contain your Telegram bot token from [@botfather](https://t.me/botfather)                                                        | No            |                   |
| telegram.admins                | Should contain an array of admin ID's who will be pinged to authenticate users. Can be gotten from [@get_id_bot](https://t.me/get_id_bot). eg `[117100000, 1978571000]` | No            |                   |

### Bot

| **Key**                 | **Description**                                                                                                 | **Optional**    | **Default Value**   |
|--------------------   |------------------------------------------------------------------------------------------------------------   |------------   |-----------------  |
| bot                   | Top level object                                                                                              | No            |                   |
| bot.logLevel              | `"info"`, `"verbose"` or `"debug"`, depending on how spammy you like your logs                                           | No            |                   |
| bot.name               | What the bot should refer to itself as. | Yes            | "SonarrRadarrBot"                  |

### Example

See [config/config.json.template](https://github.com/Makeshift/telegram-sonarr-radarr-bot/blob/master/config/config.json.template)

## Installing

** `git clone https://github.com/Makeshift/telegram-sonarr-radarr-bot.git`
** `npm install`
** `cp config/config.json.template config/config.json`
** Edit `config/config.json` to your liking
** `node index.js`

### Docker

Coming soon!

## Plan

- [ ] User authentication
- [ ] Password auth support instead of admin ping
- [ ] Setup docker image
- [ ] Sonarr search support
- [ ] Sonarr add series support
- [ ] Radarr search support
- [ ] Radarr add movie support
- [ ] Admin home page
- [ ] User home page
- [ ] Administration notifications
- [ ] Proper caching to reduce API calls
- [ ] Stats
- [ ] Dynamic config/defaults (Admin)
- [ ] Removing users (Admin)
- [ ] Dynamic config/defaults (User)
- [ ] Nconf config persistence
- [ ] Tests
- [ ] CI
- [ ] Proper semver
- [ ] File logging?
- [ ] Medusa search support?
- [ ] Medusa add anime support?
